// Generated by CoffeeScript 1.6.1
(function(){var e;e={config:{maxTickerMessages:30,cities:{laval:"Laval",montreal:"Montréal",longueuil:"Longueuil",quebec:"Québec"},endpoint:"http://localhost:8080/",img:{laval:"background-image:url(https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-frc1/v/1044056_10151446375165064_589927772_n.jpg?oh=a01714580b26f8b13950ea18cd4f9c38&oe=51D161D3&__gda__=1372687733_6f3880be94764f88c29d9ab558782b04)",montreal:"background-image:url(https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-frc1/v/1005915_10151446375195064_1238059130_n.jpg?oh=9baa55de985485ae13bf8fc1b60331a9&oe=51D1021B&__gda__=1372689171_76117b8a2841703a60e4dffa50d1b0dd)",longueuil:"background-image:url(https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-prn1/v/1011180_10151446377270064_453307637_n.jpg?oh=0dd2e3633589950615d43e5a22ef154e&oe=51D0FD35&__gda__=1372685021_27940f882063d1ddfa37b47c886ee85a)",quebec:"background-image:url(https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-prn2/v/1045252_10151446375330064_1946028326_n.jpg?oh=4c614a47f107edc0c57731008f5237ba&oe=51D1363E&__gda__=1372710796_f48a8d6a1e0a9d5ac86fce304cde414d)"}},socket:null,init:function(){var t,n,r,i,s;r=$(".resultats");i=$("#skeleton-city");for(s in this.config.cities){t=$(i.html());n=t.find(".fb-like");n.attr("data-href",n.attr("data-href").split("%CITY%").join(s));t.attr("data-city-id",s);t.find(".city-name").text(this.config.cities[s]);t.hide();r.append(t);t.slideDown("fast");t.attr("id","city-"+s);t.find(".imgville").attr("style",e.config.img[s])}this.socket=io.connect(this.config.endpoint);this.socket.on("vote",function(t){var n,r,s;r=$("#ticker");i=$("#skeleton-vote-"+t.type);n=$(i.html());if(t.type==="call"){s=t.tel.split("+").join("").substr(1);s=s.substr(0,3)+"-"+s.substr(3,3)+"-"+s.substr(6)+"xx";n.find(".tel").text(s)}n.find(".city").text(e.config.cities[t.city]);r.prepend(n.hide().fadeIn("fast"));return r.find("li:gt("+e.config.maxTickerMessages+")").remove()});return this.socket.on("stats",function(t){return e.updateVotes(t.city,t.stats.total)})},updateVotes:function(e,t){var n;n=$("#city-"+e);n.find(".vote-count").text(t).removeClass("hide");return t>=1e3?n.addClass("bignumber"):n.removeClass("bignumber")},initFacebook:function(){return FB.Event.subscribe("edge.create",function(e){return alert("You liked the URL: "+e)})}};window.App=e;$(function(){return e.init()})}).call(this);